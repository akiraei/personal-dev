<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>

  <script>

var ex = [[".", "*", "*"],["*", ".", "*"]]



    function gen (a, b) {
      var list_1 = [];
      for (var i = 0; i < a; i++){
        var list_2 = []
        for (var j = 0; j < b; j++){
                    if(Math.round(Math.random()) == 1) {
            list_2[j] = "*";
          } else {
            list_2[j] = ".";
          }
                  };
        list_1[i] = list_2;
      }
      return list_1
    };



    function check (l,x,y) {
      var count = 0;
      for(var i = -1 ; i<2; i++) {
        if (x == 0 && i < 0 ) {
          i = 0;
        };
      console.log("upper",i,j,x+i,y+j);
        for (var j = -1; j<2; j++) {
          if ( y == 0 && j < 0) {
            j = 0;
          };
          console.log("down",i,j,x+i,y+j);
         if ( x+i > l.length - 1) {
           console.log("before break");
           break;
           console.log("after break");
           return count;
         } else {
            if(l[x+i][y+j] === "*" ){
              count += 1;
            console.log("count", count);
            };
        };
        
        };
      };
      return count; 
    };



function trans (l) {
  for (var i = 0; i < l.length; i++) {
    for (var j = 0; j < l[0].length; j++) {
      if ( l[i][j] != "*" ) {
        l[i][j] = check(l,i,j);
      };
    };
  };
  return l;
};


function board_set (a, b) {
  var t = gen (a,b);
  trans(t);
  return t;
};







  </script>
</body>
</html>
